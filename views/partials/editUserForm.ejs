<link rel="stylesheet" href="/css/editUserForm.css">
<script src="/js/editUserForm.js" defer></script>

<div class="edit-user-form-container">
    <h3>Edit / Delete <%= role.charAt(0).toUpperCase() + role.slice(1) %></h3>

    <form id="searchUserForm" method="GET" data-role="<%= role %>">
        <input type="text" id="searchInput" name="keyword" placeholder="Enter Aadhar or Phone number" required />
        <button type="submit">Search</button>
    </form>

    <form id="editUserForm">
        <div class="form-grid">
            <input type="hidden" name="id" id="id" value="<%= user?._id || '' %>">

            <div><label>First Name</label>
                <input type="text" name="firstname" value="<%= user?.firstname || '' %>" readonly />
            </div>

            <div><label>Last Name</label>
                <input type="text" name="lastname" value="<%= user?.lastname || '' %>" readonly />
            </div>

            <div><label>Gender</label>
                <input type="text" name="gender" value="<%= user?.gender || '' %>" readonly />
            </div>

            <div><label>Birthdate</label>
                <input type="text" name="birthdate" value="<%= user?.birthdate || '' %>" readonly />
            </div>

            <div><label>Age</label>
                <input type="number" name="age" value="<%= user?.age || '' %>" readonly />
            </div>

            <div><label>Phone</label>
                <input type="text" name="phone" value="<%= user?.phone || '' %>" readonly />
            </div>

            <div><label>Aadhar Number</label>
                <input type="text" name="aadhar_number" value="<%= user?.aadhar_number || '' %>" readonly />
            </div>

            <div><label>Email</label>
                <input type="email" name="email" value="<%= user?.email || '' %>" readonly />
            </div>

            <div><label>City</label>
                <input type="text" name="city" value="<%= user?.city || '' %>" readonly />
            </div>

            <div><label>State</label>
                <input type="text" name="state" value="<%= user?.state || '' %>" readonly />
            </div>

            <div><label>Pincode</label>
                <input type="text" name="pincode" value="<%= user?.pincode || '' %>" readonly />
            </div>

            <div><label>Address</label>
                <textarea name="address" rows="2" readonly><%= user?.address || '' %></textarea>
            </div>

            <div><label>Role</label>
                <input type="text" name="role" value="<%= user?.role || role %>" readonly />
            </div>

            <% if (user?.role === 'worker') { %>
                <div><label>Skillset</label>
                    <input type="text" name="skillset" value="<%= user?.skillset || '' %>" readonly />
                </div>
                <div><label>Experience</label>
                    <input type="text" name="experience" value="<%= user?.experience || '' %>" readonly />
                </div>
                <div><label>Wages</label>
                    <input type="text" name="wages" value="<%= user?.wages || '' %>" readonly />
                </div>
                <div><label>Certificate</label><br />
                    <% if (user?.certificate) { %>
                        <a href="<%= user.certificate %>" target="_blank">View Certificate</a>
                    <% } else { %>
                        <span>N/A</span>
                    <% } %>
                </div>
                <div><label>Photo</label><br />
                    <% if (user?.userphoto) { %>
                        <img src="<%= user.userphoto %>" width="80">
                    <% } else { %>
                        <span>N/A</span>
                    <% } %>
                </div>
            <% } %>
        </div>

        <div class="form-actions">
            <button type="button" id="editToggleBtn">Edit</button>
            <button type="submit" id="updateBtn" style="display:none;">Update</button>
            <button type="button" id="deleteBtn">Delete</button>
        </div>
    </form>
</div>
