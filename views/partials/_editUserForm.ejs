<link rel="stylesheet" href="/css/_editUserForm.css">
<script src="/js/_editUserForm.js" defer></script>

<div class="edit-user-form-container">
    <h3>Edit / Delete Worker / Client</h3>

    <!-- ðŸ” Search Section -->
    <div class="search-bar">
        <input type="text" id="userSearchKey" placeholder="Search by Aadhar or Phone Number">
        <button id="searchUserBtn">Search</button>
    </div>

    <% if (user) { %>
        <form id="editUserForm">
            <div class="form-grid">
                <input type="hidden" name="id" value="<%= user._id %>" />

                <div><label>First Name</label>
                    <input type="text" name="firstname" value="<%= user.firstname %>" readonly required />
                </div>

                <div><label>Last Name</label>
                    <input type="text" name="lastname" value="<%= user.lastname %>" readonly required />
                </div>

                <div><label>Gender</label>
                    <input type="text" name="gender" value="<%= user.gender %>" readonly />
                </div>

                <div><label>Birthdate</label>
                    <input type="text" name="birthdate" value="<%= user.birthdate %>" readonly />
                </div>

                <div><label>Age</label>
                    <input type="number" name="age" value="<%= user.age %>" readonly />
                </div>

                <div><label>Phone</label>
                    <input type="text" name="phone" value="<%= user.phone %>" readonly />
                </div>

                <div><label>Aadhar Number</label>
                    <input type="text" name="aadhar_number" value="<%= user.aadhar_number %>" readonly />
                </div>

                <div><label>Email</label>
                    <input type="email" name="email" value="<%= user.email %>" readonly />
                </div>

                <div><label>City</label>
                    <input type="text" name="city" value="<%= user.city %>" readonly />
                </div>

                <div><label>State</label>
                    <input type="text" name="state" value="<%= user.state %>" readonly />
                </div>

                <div><label>Pincode</label>
                    <input type="text" name="pincode" value="<%= user.pincode %>" readonly />
                </div>

                <div><label>Address</label>
                    <textarea name="address" rows="2" readonly><%= user.address %></textarea>
                </div>

                <div><label>Role</label>
                    <input type="text" name="role" value="<%= user.role %>" readonly />
                </div>

                <% if (user.role === 'worker') { %>
                    <div><label>Skillset</label>
                        <input type="text" name="skillset" value="<%= user.skillset %>" readonly />
                    </div>

                    <div><label>Experience (Years)</label>
                        <input type="number" name="experience" value="<%= user.experience %>" readonly />
                    </div>

                    <div><label>Expected Wages</label>
                        <input type="number" name="wages" value="<%= user.wages %>" readonly />
                    </div>

                    <div><label>Certificate</label><br />
                        <% if (user.certificate) { %>
                            <a href="<%= user.certificate %>" target="_blank">View Certificate</a>
                        <% } else { %>
                            <span>N/A</span>
                        <% } %>
                    </div>

                    <div><label>User Photo</label><br />
                        <% if (user.userphoto) { %>
                            <img src="<%= user.userphoto %>" width="80" />
                        <% } else { %>
                            <span>No photo</span>
                        <% } %>
                    </div>
                <% } %>
            </div>

            <div class="form-actions">
                <button type="button" id="editToggleBtn">Edit</button>
                <button type="submit" id="updateBtn" style="display:none;">Update</button>
                <button type="button" id="deleteBtn">Delete</button>
            </div>
        </form>
    <% } else { %>
        <p class="no-user-msg">Search to view and update any client or worker information.</p>
    <% } %>
</div>
