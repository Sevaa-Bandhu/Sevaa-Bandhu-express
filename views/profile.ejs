<!-- views/profile.ejs -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile | Sevaa Bandhu</title>
    <link rel="icon" type="image/x-icon" href="/images/icon.ico">
    <link rel="stylesheet" href="/css/profile.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <div class="profile-container">
        <div class="profile-sidebar">
            <img src="/images/avatar-placeholder.png" alt="Profile Picture" class="profile-pic">
            <h2>
                <%= user.firstname %>
                    <%= user.lastname %>
            </h2>
            <p>+91 <%= user.mobile %>
            </p>
        </div>

        <form id="updateProfileForm" action="/profile/update" method="POST">
            <!-- Personal Detail -->
            <section class="detail-section">
                <h3 class="section-title">Personal Detail</h3>
                <div class="input-pair">
                    <label>First Name</label>
                    <input type="text" name="firstname" value="<%= profile.firstname %>" required>
                </div>
                <div class="input-pair">
                    <label>Last Name</label>
                    <input type="text" name="lastname" value="<%= profile.lastname %>" required>
                </div>
                <div class="input-pair">
                    <label>Birth Date</label>
                    <input type="text" value="<%= profile.birthdate %>" readonly>
                </div>
                <div class="input-pair">
                    <label>Age</label>
                    <input type="text" value="<%= profile.age %>" readonly>
                </div>
                <div class="input-pair">
                    <label>Gender</label>
                    <select name="gender">
                        <option value="Male" <%=profile.gender==='Male' ? 'selected' : '' %>>Male</option>
                        <option value="Female" <%=profile.gender==='Female' ? 'selected' : '' %>>Female</option>
                        <option value="Other" <%=profile.gender==='Other' ? 'selected' : '' %>>Other</option>
                    </select>
                </div>
                <div class="input-pair">
                    <label>Email</label>
                    <input type="email" name="email" value="<%= profile.email %>">
                </div>
            </section>

            <!-- Identity Detail -->
            <section class="detail-section">
                <h3 class="section-title">Identity Detail</h3>
                <div class="input-pair">
                    <label>Unique Identity Number</label>
                    <input type="text" value="<%= profile.aadhar_number %>" readonly>
                </div>
                <div class="input-pair">
                    <label>Registered As</label>
                    <input type="text" value="<%= profile.role %>" readonly>
                </div>
                <div class="input-pair">
                    <label>Phone Number</label>
                    <input type="text" value="<%= profile.phone %>" readonly>
                </div>
            </section>

            <!-- Address Detail -->
            <section class="detail-section">
                <h3 class="section-title">Address Detail</h3>
                <div class="input-pair">
                    <label>Address</label>
                    <input type="text" name="address" value="<%= profile.address %>" required>
                </div>
                <div class="input-pair">
                    <label>City</label>
                    <input type="text" name="city" value="<%= profile.city %>" required>
                </div>
                <div class="input-pair">
                    <label>Region</label>
                    <input type="text" name="region" value="<%= profile.region %>" required>
                </div>
                <div class="input-pair">
                    <label>State</label>
                    <input type="text" name="state" value="<%= profile.state %>" required>
                </div>
            </section>

            <% if (role==='worker' ) { %>
                <!-- Work Skill (For Workers only) -->
                <section class="detail-section">
                    <h3 class="section-title">Work Skill</h3>
                    <div class="input-pair">
                        <label>Work Field</label>
                        <input type="text" name="skillset" value="<%= profile.skillset %>">
                    </div>
                    <div class="input-pair">
                        <label>Experience (Years)</label>
                        <input type="number" name="experience" value="<%= profile.experience %>">
                    </div>
                    <div class="input-pair">
                        <label>Expected Wages (â‚¹)</label>
                        <input type="number" name="wages" value="<%= profile.wages %>">
                    </div>
                </section>
                <% } %>

                    <!-- Submit & Delete Buttons -->
                    <div class="form-actions">
                        <button type="submit" class="btn-update">Update Profile</button>

                        <form id="deleteForm" action="/profile/delete" method="POST">
                            <button type="submit" class="btn-delete">Delete Account</button>
                        </form>
                    </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/js/profile.js"></script>
</body>

</html>